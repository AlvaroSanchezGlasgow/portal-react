{"ast":null,"code":"var _jsxFileName = \"/Users/alvarosanchezgalvan/Desktop/WorkSpace/poc-portal/src/ClientAdmin/ClientListPage.js\";\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport NavbarComponent from \"../Components/NavbarComponent\";\nimport AsideMenuComponent from \"../Components/AsideMenuComponent\";\nimport MUIDataTable from \"mui-datatables\";\nimport { useHistory } from \"react-router-dom\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\n\nconst axios = require(\"axios\");\n\nfunction ClientListPage() {\n  const [result, setResult] = useState([]);\n  const [errorMessage, setError] = useState([]);\n  let history = useHistory();\n\n  const goToEdit = value => {\n    history.push(\"/edit_client?client=\" + value[0]);\n  };\n\n  const options = {\n    filterType: \"dropdown\",\n    rowHover: true,\n    onRowsDelete: rowsDeleted => {\n      const rowsToDelete = rowsDeleted.data.map(d => result[d.dataIndex]);\n      handleDelete(rowsToDelete);\n    },\n    onRowClick: (event, rowData) => {\n      goToEdit(event);\n    },\n    rowsPerPageOptions: [5, 10]\n  };\n  const columns = [{\n    name: \"id\",\n    label: \"ID\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"name\",\n    label: \"NAME\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"website\",\n    label: \"WEBSITE\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"clientManager\",\n    label: \"CLIENT MANAGER\",\n    options: {\n      filter: true\n    }\n  }];\n\n  const handleDelete = recordsToDelete => {\n    var result = recordsToDelete.map(function (item) {\n      return item.id;\n    }).join(\", \");\n    axios.delete(`${process.env.REACT_APP_API_ROOT_URL}/client-management/clients/${result}`, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\")\n      }\n    }).then(function (response) {\n      fetchData();\n    }).catch(function (error) {\n      console.log(\"Error Fetching Data: \" + error);\n      setError(error);\n    }).finally(function () {// always executed\n    });\n  };\n\n  const fetchData = async () => {\n    axios.get(`${process.env.REACT_APP_API_ROOT_URL}/client-management/clients`, {\n      headers: {}\n    }).then(function (response) {\n      setResult(response.data);\n    }).catch(function (error) {\n      // handle error\n      console.log(\"Error Fetching Data: \" + error);\n      history.push(\"/\");\n    }).finally(function () {// always executed\n    });\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NavbarComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AlertTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, \"Error\"), JSON.stringify(errorMessage.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column is-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AsideMenuComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column is-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, \"Clients\"), /*#__PURE__*/React.createElement(MUIDataTable, {\n    title: \"\",\n    data: result,\n    columns: columns,\n    options: options,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default ClientListPage;","map":{"version":3,"sources":["/Users/alvarosanchezgalvan/Desktop/WorkSpace/poc-portal/src/ClientAdmin/ClientListPage.js"],"names":["React","useState","useEffect","NavbarComponent","AsideMenuComponent","MUIDataTable","useHistory","Alert","AlertTitle","axios","require","ClientListPage","result","setResult","errorMessage","setError","history","goToEdit","value","push","options","filterType","rowHover","onRowsDelete","rowsDeleted","rowsToDelete","data","map","d","dataIndex","handleDelete","onRowClick","event","rowData","rowsPerPageOptions","columns","name","label","filter","recordsToDelete","item","id","join","delete","process","env","REACT_APP_API_ROOT_URL","headers","Authorization","sessionStorage","getItem","then","response","fetchData","catch","error","console","log","finally","get","JSON","stringify","message"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,eAAP,MAA4B,+BAA5B;AACA,OAAOC,kBAAP,MAA+B,kCAA/B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,KAAT,EAAgBC,UAAhB,QAAkC,kBAAlC;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,SAASC,cAAT,GAA0B;AACxB,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBZ,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACa,YAAD,EAAeC,QAAf,IAA2Bd,QAAQ,CAAC,EAAD,CAAzC;AACA,MAAIe,OAAO,GAAGV,UAAU,EAAxB;;AAEA,QAAMW,QAAQ,GAAIC,KAAD,IAAW;AAC1BF,IAAAA,OAAO,CAACG,IAAR,CAAa,yBAAyBD,KAAK,CAAC,CAAD,CAA3C;AACD,GAFD;;AAIA,QAAME,OAAO,GAAG;AACdC,IAAAA,UAAU,EAAE,UADE;AAEdC,IAAAA,QAAQ,EAAE,IAFI;AAGdC,IAAAA,YAAY,EAAGC,WAAD,IAAiB;AAC7B,YAAMC,YAAY,GAAGD,WAAW,CAACE,IAAZ,CAAiBC,GAAjB,CAAsBC,CAAD,IAAOhB,MAAM,CAACgB,CAAC,CAACC,SAAH,CAAlC,CAArB;AACAC,MAAAA,YAAY,CAACL,YAAD,CAAZ;AACD,KANa;AAOdM,IAAAA,UAAU,EAAE,CAACC,KAAD,EAAQC,OAAR,KAAoB;AAC9BhB,MAAAA,QAAQ,CAACe,KAAD,CAAR;AACD,KATa;AAUdE,IAAAA,kBAAkB,EAAE,CAAC,CAAD,EAAI,EAAJ;AAVN,GAAhB;AAaA,QAAMC,OAAO,GAAG,CACd;AACEC,IAAAA,IAAI,EAAE,IADR;AAEEC,IAAAA,KAAK,EAAE,IAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GADc,EAQd;AACEF,IAAAA,IAAI,EAAE,MADR;AAEEC,IAAAA,KAAK,EAAE,MAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GARc,EAed;AACEF,IAAAA,IAAI,EAAE,SADR;AAEEC,IAAAA,KAAK,EAAE,SAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GAfc,EAsBd;AACEF,IAAAA,IAAI,EAAE,eADR;AAEEC,IAAAA,KAAK,EAAE,gBAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GAtBc,CAAhB;;AA+BA,QAAMR,YAAY,GAAIS,eAAD,IAAqB;AACxC,QAAI3B,MAAM,GAAG2B,eAAe,CACzBZ,GADU,CACN,UAAUa,IAAV,EAAgB;AACnB,aAAOA,IAAI,CAACC,EAAZ;AACD,KAHU,EAIVC,IAJU,CAIL,IAJK,CAAb;AAMAjC,IAAAA,KAAK,CACFkC,MADH,CAEK,GAAEC,OAAO,CAACC,GAAR,CAAYC,sBAAuB,8BAA6BlC,MAAO,EAF9E,EAGI;AACEmC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYC,cAAc,CAACC,OAAf,CAAuB,YAAvB;AADpB;AADX,KAHJ,EASGC,IATH,CASQ,UAAUC,QAAV,EAAoB;AACxBC,MAAAA,SAAS;AACV,KAXH,EAYGC,KAZH,CAYS,UAAUC,KAAV,EAAiB;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BF,KAAtC;AACAxC,MAAAA,QAAQ,CAACwC,KAAD,CAAR;AACD,KAfH,EAgBGG,OAhBH,CAgBW,YAAY,CACnB;AACD,KAlBH;AAmBD,GA1BD;;AA4BA,QAAML,SAAS,GAAG,YAAY;AAC5B5C,IAAAA,KAAK,CACFkD,GADH,CACQ,GAAEf,OAAO,CAACC,GAAR,CAAYC,sBAAuB,4BAD7C,EAC0E;AACtEC,MAAAA,OAAO,EAAE;AAD6D,KAD1E,EAIGI,IAJH,CAIQ,UAAUC,QAAV,EAAoB;AACxBvC,MAAAA,SAAS,CAACuC,QAAQ,CAAC1B,IAAV,CAAT;AACD,KANH,EAOG4B,KAPH,CAOS,UAAUC,KAAV,EAAiB;AACtB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BF,KAAtC;AACAvC,MAAAA,OAAO,CAACG,IAAR,CAAa,GAAb;AACD,KAXH,EAYGuC,OAZH,CAYW,YAAY,CACnB;AACD,KAdH;AAeD,GAhBD;;AAiBAxD,EAAAA,SAAS,CAAC,MAAM;AACdmD,IAAAA,SAAS;AACV,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACE,uDACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAKE,oBAAC,KAAD;AAAO,IAAA,QAAQ,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEGO,IAAI,CAACC,SAAL,CAAe/C,YAAY,CAACgD,OAA5B,CAFH,CALF,eAUE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,eAKE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE,oBAAC,YAAD;AACE,IAAA,KAAK,EAAE,EADT;AAEE,IAAA,IAAI,EAAElD,MAFR;AAGE,IAAA,OAAO,EAAEuB,OAHX;AAIE,IAAA,OAAO,EAAEf,OAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CALF,eAcE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdF,CAVF,CADF;AA6BD;;AACD,eAAeT,cAAf","sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport NavbarComponent from \"../Components/NavbarComponent\";\nimport AsideMenuComponent from \"../Components/AsideMenuComponent\";\nimport MUIDataTable from \"mui-datatables\";\nimport { useHistory } from \"react-router-dom\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\n\nconst axios = require(\"axios\");\n\nfunction ClientListPage() {\n  const [result, setResult] = useState([]);\n  const [errorMessage, setError] = useState([]);\n  let history = useHistory();\n\n  const goToEdit = (value) => {\n    history.push(\"/edit_client?client=\" + value[0]);\n  };\n\n  const options = {\n    filterType: \"dropdown\",\n    rowHover: true,\n    onRowsDelete: (rowsDeleted) => {\n      const rowsToDelete = rowsDeleted.data.map((d) => result[d.dataIndex]);\n      handleDelete(rowsToDelete);\n    },\n    onRowClick: (event, rowData) => {\n      goToEdit(event);\n    },\n    rowsPerPageOptions: [5, 10],\n  };\n\n  const columns = [\n    {\n      name: \"id\",\n      label: \"ID\",\n      options: {\n        filter: true,\n      },\n    },\n    {\n      name: \"name\",\n      label: \"NAME\",\n      options: {\n        filter: true,\n      },\n    },\n    {\n      name: \"website\",\n      label: \"WEBSITE\",\n      options: {\n        filter: true,\n      },\n    },\n    {\n      name: \"clientManager\",\n      label: \"CLIENT MANAGER\",\n      options: {\n        filter: true,\n      },\n    },\n  ];\n\n  const handleDelete = (recordsToDelete) => {\n    var result = recordsToDelete\n      .map(function (item) {\n        return item.id;\n      })\n      .join(\", \");\n\n    axios\n      .delete(\n        `${process.env.REACT_APP_API_ROOT_URL}/client-management/clients/${result}`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\"),\n          },\n        }\n      )\n      .then(function (response) {\n        fetchData();\n      })\n      .catch(function (error) {\n        console.log(\"Error Fetching Data: \" + error);\n        setError(error);\n      })\n      .finally(function () {\n        // always executed\n      });\n  };\n\n  const fetchData = async () => {\n    axios\n      .get(`${process.env.REACT_APP_API_ROOT_URL}/client-management/clients`, {\n        headers: {},\n      })\n      .then(function (response) {\n        setResult(response.data);\n      })\n      .catch(function (error) {\n        // handle error\n        console.log(\"Error Fetching Data: \" + error);\n        history.push(\"/\");\n      })\n      .finally(function () {\n        // always executed\n      });\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  return (\n    <>\n      <div className=\"container\">\n        <NavbarComponent />\n      </div>\n      \n      <Alert severity=\"error\">\n        <AlertTitle>Error</AlertTitle>\n        {JSON.stringify(errorMessage.message)}\n      </Alert>\n      \n      <div className=\"columns\">\n        <div className=\"column\"></div>\n        <div className=\"column is-2\">\n          <AsideMenuComponent />\n        </div>\n        <div className=\"column is-8\">\n          <h2>Clients</h2>\n          <MUIDataTable\n            title={\"\"}\n            data={result}\n            columns={columns}\n            options={options}\n          />\n        </div>\n        <div className=\"column\"></div>\n      </div>\n    </>\n  );\n}\nexport default ClientListPage;\n"]},"metadata":{},"sourceType":"module"}