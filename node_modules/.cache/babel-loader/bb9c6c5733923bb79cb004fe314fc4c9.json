{"ast":null,"code":"var _jsxFileName = \"C:\\\\personal_workspace\\\\portal-react\\\\src\\\\TrackerAdmin\\\\AddOpportunityForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\nimport Fab from \"@material-ui/core/Fab\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\n\nconst axios = require(\"axios\");\n\nlet flag = true;\n\nfunction AddOpportunityForm(props) {\n  const [opportunitiesObject, setOpportunitiesObject] = useState([]);\n  const [auxOpportunityObject, setAuxOpportunityObject] = useState([]);\n  const [sending, setSending] = useState(false);\n  const [showOpportunityForm, setShowOpportunityForm] = useState(false);\n\n  const handleChangeOpportunityObject = e => {\n    setAuxOpportunityObject({ ...auxOpportunityObject,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const fetchData = () => {\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const clientUrl = params.get(\"client\");\n    axios.get(`${process.env.REACT_APP_API_ROOT_URL}/opportunity-management/opportunities/${clientUrl}`, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\")\n      }\n    }).then(function (response) {\n      setOpportunitiesObject(response.data);\n    }).catch(function (error) {// handle error\n    }).finally(function () {// always executed\n    });\n  };\n\n  useEffect(props => {\n    fetchData();\n  }, []);\n\n  const handleKeyPress = event => {\n    if (event.key === \"Enter\") {\n      handleSubmit();\n    }\n  };\n\n  const handleSubmit = evt => {\n    setSending(true);\n    flag = true;\n    var params = new URLSearchParams();\n\n    if (!auxOpportunityObject.name) {\n      flag = false;\n    }\n\n    if (!auxOpportunityObject.surname) {\n      flag = false;\n    }\n\n    if (!auxOpportunityObject.role) {\n      flag = false;\n    }\n\n    if (!auxOpportunityObject.phoneNumber) {\n      flag = false;\n    }\n\n    if (!auxOpportunityObject.emailAddress) {\n      flag = false;\n    }\n\n    if (!auxOpportunityObject.comment) {\n      flag = false;\n    }\n\n    if (!props.clientId) {\n      flag = false;\n    }\n\n    if (flag) {\n      params.append(\"client_id\", props.clientId);\n      params.append(\"surname\", auxOpportunityObject.surname);\n      params.append(\"name\", auxOpportunityObject.name);\n      params.append(\"role\", auxOpportunityObject.role);\n      params.append(\"phoneNumber\", auxOpportunityObject.phoneNumber);\n      params.append(\"emailAddress\", auxOpportunityObject.emailAddress);\n      params.append(\"comment\", auxOpportunityObject.comment);\n      axios.post(`${process.env.REACT_APP_API_ROOT_URL}/opportunity-management/opportunities`, params, {\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\")\n        }\n      }).then(function (response) {\n        fetchData();\n      }).catch(function (error) {// handle error\n      }).finally(function () {// always executed\n      });\n    }\n  };\n\n  const handleDeleteOpportunities = id => {\n    axios.delete(`${process.env.REACT_APP_API_ROOT_URL}/opportunity-management/opportunities/${id}`, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\")\n      }\n    }).then(function (response) {\n      fetchData();\n    }).catch(function (error) {// handle error\n    }).finally(function () {// always executed\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, \"Opportunities\", \" \", showOpportunityForm ? /*#__PURE__*/React.createElement(Tooltip, {\n    placement: \"right\",\n    title: \"Hide New Opportunity Form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"add\",\n    onClick: () => showOpportunityForm ? setShowOpportunityForm(false) : setShowOpportunityForm(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(RemoveIcon, {\n    style: {\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }))) : /*#__PURE__*/React.createElement(Tooltip, {\n    placement: \"right\",\n    title: \"Show New Opportunity Form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"add\",\n    onClick: () => showOpportunityForm ? setShowOpportunityForm(false) : setShowOpportunityForm(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(AddIcon, {\n    style: {\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  })))), showOpportunityForm ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"input\",\n    name: \"title\",\n    id: \"title\",\n    placeholder: \"title\",\n    type: \"text\",\n    onChange: e => handleChangeOpportunityObject(e),\n    onKeyPress: e => handleKeyPress(e),\n    maxLength: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 15\n    }\n  }), sending && !auxOpportunityObject.name && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 19\n    }\n  }, \"Mandatory Field\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    class: \"textarea\",\n    name: \"description\",\n    id: \"description\",\n    rows: \"3\",\n    maxLength: \"75\",\n    onChange: e => handleChangeOpportunityObject(e),\n    onKeyPress: e => handleKeyPress(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 15\n    }\n  }), sending && !auxOpportunityObject.surname && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 19\n    }\n  }, \"Mandatory Field\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"status\",\n    id: \"status\",\n    onChange: e => handleChangeOpportunityObject(e),\n    onKeyPress: e => handleKeyPress(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, \"Select Option\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"OPEN\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, \"Open\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"AWARDED\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, \"Awarded\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"CLOSED\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }\n  }, \"Closed\")), sending && !auxOpportunityObject.role && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 19\n    }\n  }, \"Mandatory Field\")))), /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    class: \"button is-black\",\n    onClick: () => handleSubmit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }, \"Add Opportunity\"))) : /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"columns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table is-hoverable\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }\n  }, \"Surname\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 17\n    }\n  }, \"Role\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }\n  }, \"Phone Number\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 17\n    }\n  }, \"Email Address\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 17\n    }\n  }, \"Aditional Info\")), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }, opportunitiesObject.length > 0 ? opportunitiesObject.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      class: \"button is-text\",\n      onClick: () => handleDeleteOpportunities(item.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 25\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 25\n      }\n    }, item.surname), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 25\n      }\n    }, item.role), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 25\n      }\n    }, item.phoneNumber), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 25\n      }\n    }, item.emailAddress), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 25\n      }\n    }, item.comment));\n  }) : /*#__PURE__*/React.createElement(\"td\", {\n    colspan: \"7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 21\n    }\n  }, \"No results found\"))))))));\n}\n\nexport default AddOpportunityForm;","map":{"version":3,"sources":["C:/personal_workspace/portal-react/src/TrackerAdmin/AddOpportunityForm.js"],"names":["React","useState","useEffect","Alert","DeleteIcon","AddIcon","RemoveIcon","Fab","Tooltip","axios","require","flag","AddOpportunityForm","props","opportunitiesObject","setOpportunitiesObject","auxOpportunityObject","setAuxOpportunityObject","sending","setSending","showOpportunityForm","setShowOpportunityForm","handleChangeOpportunityObject","e","target","name","value","fetchData","search","window","location","params","URLSearchParams","clientUrl","get","process","env","REACT_APP_API_ROOT_URL","headers","Authorization","sessionStorage","getItem","then","response","data","catch","error","finally","handleKeyPress","event","key","handleSubmit","evt","surname","role","phoneNumber","emailAddress","comment","clientId","append","post","handleDeleteOpportunities","id","delete","color","length","map","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport RemoveIcon from \"@material-ui/icons/Remove\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nconst axios = require(\"axios\");\r\nlet flag = true;\r\n\r\nfunction AddOpportunityForm(props) {\r\n  const [opportunitiesObject, setOpportunitiesObject] = useState([]);\r\n  const [auxOpportunityObject, setAuxOpportunityObject] = useState([]);\r\n  const [sending, setSending] = useState(false);\r\n  const [showOpportunityForm, setShowOpportunityForm] = useState(false);\r\n\r\n  const handleChangeOpportunityObject = (e) => {\r\n    setAuxOpportunityObject({\r\n      ...auxOpportunityObject,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const fetchData = () => {\r\n    const search = window.location.search;\r\n    const params = new URLSearchParams(search);\r\n    const clientUrl = params.get(\"client\");\r\n\r\n    axios\r\n      .get(\r\n        `${process.env.REACT_APP_API_ROOT_URL}/opportunity-management/opportunities/${clientUrl}`,\r\n        {\r\n          headers: {\r\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\"),\r\n          },\r\n        }\r\n      )\r\n      .then(function (response) {\r\n        setOpportunitiesObject(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        // handle error\r\n      })\r\n      .finally(function () {\r\n        // always executed\r\n      });\r\n  };\r\n\r\n  useEffect((props) => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleKeyPress = (event) => {\r\n    if (event.key === \"Enter\") {\r\n      handleSubmit();\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    setSending(true);\r\n\r\n    flag = true;\r\n    var params = new URLSearchParams();\r\n\r\n    if (!auxOpportunityObject.name) {\r\n      flag = false;\r\n    }\r\n    if (!auxOpportunityObject.surname) {\r\n      flag = false;\r\n    }\r\n    if (!auxOpportunityObject.role) {\r\n      flag = false;\r\n    }\r\n\r\n    if (!auxOpportunityObject.phoneNumber) {\r\n      flag = false;\r\n    }\r\n\r\n    if (!auxOpportunityObject.emailAddress) {\r\n      flag = false;\r\n    }\r\n\r\n    if (!auxOpportunityObject.comment) {\r\n      flag = false;\r\n    }\r\n    if (!props.clientId) {\r\n      flag = false;\r\n    }\r\n\r\n    if (flag) {\r\n      params.append(\"client_id\", props.clientId);\r\n\r\n      params.append(\"surname\", auxOpportunityObject.surname);\r\n      params.append(\"name\", auxOpportunityObject.name);\r\n      params.append(\"role\", auxOpportunityObject.role);\r\n      params.append(\"phoneNumber\", auxOpportunityObject.phoneNumber);\r\n      params.append(\"emailAddress\", auxOpportunityObject.emailAddress);\r\n      params.append(\"comment\", auxOpportunityObject.comment);\r\n\r\n      axios\r\n        .post(\r\n          `${process.env.REACT_APP_API_ROOT_URL}/opportunity-management/opportunities`,\r\n          params,\r\n          {\r\n            headers: {\r\n              Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\"),\r\n            },\r\n          }\r\n        )\r\n        .then(function (response) {\r\n          fetchData();\r\n        })\r\n        .catch(function (error) {\r\n          // handle error\r\n        })\r\n        .finally(function () {\r\n          // always executed\r\n        });\r\n    }\r\n  };\r\n  const handleDeleteOpportunities = (id) => {\r\n    axios\r\n      .delete(\r\n        `${process.env.REACT_APP_API_ROOT_URL}/opportunity-management/opportunities/${id}`,\r\n        {\r\n          headers: {\r\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\"),\r\n          },\r\n        }\r\n      )\r\n      .then(function (response) {\r\n        fetchData();\r\n      })\r\n      .catch(function (error) {\r\n        // handle error\r\n      })\r\n      .finally(function () {\r\n        // always executed\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div class=\"label\">\r\n        Opportunities{\" \"}\r\n        {showOpportunityForm ? (\r\n          <Tooltip placement=\"right\" title=\"Hide New Opportunity Form\">\r\n            <Fab\r\n              color=\"primary\"\r\n              aria-label=\"add\"\r\n              onClick={() =>\r\n                showOpportunityForm\r\n                  ? setShowOpportunityForm(false)\r\n                  : setShowOpportunityForm(true)\r\n              }\r\n            >\r\n              {\" \"}\r\n              <RemoveIcon style={{ color: \"white\" }} />\r\n            </Fab>\r\n          </Tooltip>\r\n        ) : (\r\n          <Tooltip placement=\"right\" title=\"Show New Opportunity Form\">\r\n            <Fab\r\n              color=\"primary\"\r\n              aria-label=\"add\"\r\n              onClick={() =>\r\n                showOpportunityForm\r\n                  ? setShowOpportunityForm(false)\r\n                  : setShowOpportunityForm(true)\r\n              }\r\n            >\r\n              {\" \"}\r\n              <AddIcon style={{ color: \"white\" }} />\r\n            </Fab>\r\n          </Tooltip>\r\n        )}\r\n      </div>\r\n      {showOpportunityForm ? (\r\n        <>\r\n          <div className=\"columns\">\r\n            <div className=\"column\">\r\n              <label className=\"label\">Title</label>\r\n              <input\r\n                className=\"input\"\r\n                name=\"title\"\r\n                id=\"title\"\r\n                placeholder=\"title\"\r\n                type=\"text\"\r\n                onChange={(e) => handleChangeOpportunityObject(e)}\r\n                onKeyPress={(e) => handleKeyPress(e)}\r\n                maxLength=\"20\"\r\n              />\r\n\r\n              {sending && !auxOpportunityObject.name && (\r\n                <>\r\n                  <Alert variant=\"outlined\" severity=\"error\">\r\n                    Mandatory Field\r\n                  </Alert>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"column\">\r\n              <label className=\"label\">Description</label>\r\n\r\n              <textarea\r\n                class=\"textarea\"\r\n                name=\"description\"\r\n                id=\"description\"\r\n                rows=\"3\"\r\n                maxLength=\"75\"\r\n                onChange={(e) => handleChangeOpportunityObject(e)}\r\n                onKeyPress={(e) => handleKeyPress(e)}\r\n              ></textarea>\r\n\r\n              {sending && !auxOpportunityObject.surname && (\r\n                <>\r\n                  <Alert variant=\"outlined\" severity=\"error\">\r\n                    Mandatory Field\r\n                  </Alert>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"column\">\r\n              <label className=\"label\">Status</label>\r\n\r\n              <select\r\n                name=\"status\"\r\n                id=\"status\"\r\n                onChange={(e) => handleChangeOpportunityObject(e)}\r\n                onKeyPress={(e) => handleKeyPress(e)}\r\n              >\r\n                <option value=\"\">Select Option</option>\r\n                <option value=\"OPEN\">Open</option>\r\n                <option value=\"AWARDED\">Awarded</option>\r\n                <option value=\"CLOSED\">Closed</option>\r\n              </select>\r\n            \r\n\r\n              {sending && !auxOpportunityObject.role && (\r\n                <>\r\n                  <Alert variant=\"outlined\" severity=\"error\">\r\n                    Mandatory Field\r\n                  </Alert>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n          \r\n          <center>\r\n            <button class=\"button is-black\" onClick={() => handleSubmit()}>\r\n              Add Opportunity\r\n            </button>\r\n          </center>\r\n        </>\r\n      ) : (\r\n        <></>\r\n      )}\r\n\r\n      <center>\r\n        <div class=\"columns\">\r\n          <div class=\"column\">\r\n            <table className=\"table is-hoverable\">\r\n              <thead>\r\n                <td></td>\r\n                <td>Name</td>\r\n                <td>Surname</td>\r\n                <td>Role</td>\r\n                <td>Phone Number</td>\r\n                <td>Email Address</td>\r\n                <td>Aditional Info</td>\r\n              </thead>\r\n              <tbody>\r\n                {opportunitiesObject.length > 0 ? (\r\n                  opportunitiesObject.map(function (item) {\r\n                    return (\r\n                      <tr>\r\n                        <td>\r\n                          <button\r\n                            class=\"button is-text\"\r\n                            onClick={() => handleDeleteOpportunities(item.id)}\r\n                          >\r\n                            <DeleteIcon />\r\n                          </button>\r\n                        </td>\r\n\r\n                        <td>{item.name}</td>\r\n                        <td>{item.surname}</td>\r\n                        <td>{item.role}</td>\r\n                        <td>{item.phoneNumber}</td>\r\n                        <td>{item.emailAddress}</td>\r\n                        <td>{item.comment}</td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <td colspan=\"7\">\r\n                    <center>No results found</center>\r\n                  </td>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </center>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddOpportunityForm;\r\n"]},"metadata":{},"sourceType":"module"}