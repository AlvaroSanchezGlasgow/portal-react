{"ast":null,"code":"var _jsxFileName = \"C:\\\\personal_workspace\\\\portal-react\\\\src\\\\Pages\\\\ClientAdmin\\\\ClientListPage.js\";\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport NavbarComponent from \"../../components/NavbarComponent\";\nimport MUIDataTable from \"mui-datatables\";\nimport { useHistory } from \"react-router-dom\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\n\nconst axios = require(\"axios\");\n\nfunction ClientListPage() {\n  const [result, setResult] = useState([]);\n  const [errorMessage, setError] = useState([]);\n  let history = useHistory();\n\n  const goToEdit = value => {\n    history.push(\"/edit_client?client=\" + value[0]);\n  };\n\n  const options = {\n    filterType: \"dropdown\",\n    rowHover: true,\n    onRowsDelete: rowsDeleted => {\n      const rowsToDelete = rowsDeleted.data.map(d => result[d.dataIndex]);\n      handleDelete(rowsToDelete);\n    },\n    onRowClick: (event, rowData) => {\n      goToEdit(event);\n    },\n    rowsPerPageOptions: [5, 10]\n  };\n  const columns = [{\n    name: \"id\",\n    label: \"ID\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"name\",\n    label: \"NAME\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"turnover\",\n    label: \"TURNOVER\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"number_employees\",\n    label: \"EMPLOYEES\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"website\",\n    label: \"WEBSITE\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"clientManager\",\n    label: \"CLIENT MANAGER\",\n    options: {\n      filter: true\n    }\n  }];\n\n  const handleDelete = recordsToDelete => {\n    var result = recordsToDelete.map(function (item) {\n      return item.id;\n    }).join(\", \");\n    axios.delete(`${process.env.REACT_APP_API_ROOT_URL}/client-management/clients/${result}`, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\")\n      }\n    }).then(function (response) {\n      fetchData();\n    }).catch(function (error) {\n      console.log(\"Error : \" + error);\n      setError(error);\n    }).finally(function () {// always executed\n    });\n  };\n\n  const fetchData = async () => {\n    axios.get(`${process.env.REACT_APP_API_ROOT_URL}/client-management/clients`, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\")\n      }\n    }).then(function (response) {\n      setResult(response.data);\n    }).catch(function (error) {\n      // handle error\n      console.log(\"Error Fetching Data: \" + error);\n      history.push(\"/\");\n    }).finally(function () {// always executed\n    });\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NavbarComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"main_index\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, \"Clients List\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column is-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, errorMessage.message && /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AlertTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, \"Error\"), JSON.stringify(errorMessage.message)), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button is-primary\",\n    onClick: () => history.push(\"/new-client\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, \"New Client\"), /*#__PURE__*/React.createElement(MUIDataTable, {\n    title: \"\",\n    data: result,\n    columns: columns,\n    options: options,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  })))));\n}\n\nexport default ClientListPage;","map":{"version":3,"sources":["C:/personal_workspace/portal-react/src/Pages/ClientAdmin/ClientListPage.js"],"names":["React","useState","useEffect","NavbarComponent","MUIDataTable","useHistory","Alert","AlertTitle","axios","require","ClientListPage","result","setResult","errorMessage","setError","history","goToEdit","value","push","options","filterType","rowHover","onRowsDelete","rowsDeleted","rowsToDelete","data","map","d","dataIndex","handleDelete","onRowClick","event","rowData","rowsPerPageOptions","columns","name","label","filter","recordsToDelete","item","id","join","delete","process","env","REACT_APP_API_ROOT_URL","headers","Authorization","sessionStorage","getItem","then","response","fetchData","catch","error","console","log","finally","get","message","JSON","stringify"],"mappings":";;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,eAAP,MAA4B,kCAA5B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,KAAT,EAAgBC,UAAhB,QAAkC,kBAAlC;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,SAASC,cAAT,GAA0B;AACxB,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACY,YAAD,EAAeC,QAAf,IAA2Bb,QAAQ,CAAC,EAAD,CAAzC;AACA,MAAIc,OAAO,GAAGV,UAAU,EAAxB;;AAEA,QAAMW,QAAQ,GAAIC,KAAD,IAAW;AAC1BF,IAAAA,OAAO,CAACG,IAAR,CAAa,yBAAyBD,KAAK,CAAC,CAAD,CAA3C;AACD,GAFD;;AAIA,QAAME,OAAO,GAAG;AACdC,IAAAA,UAAU,EAAE,UADE;AAEdC,IAAAA,QAAQ,EAAE,IAFI;AAGdC,IAAAA,YAAY,EAAGC,WAAD,IAAiB;AAC7B,YAAMC,YAAY,GAAGD,WAAW,CAACE,IAAZ,CAAiBC,GAAjB,CAAsBC,CAAD,IAAOhB,MAAM,CAACgB,CAAC,CAACC,SAAH,CAAlC,CAArB;AACAC,MAAAA,YAAY,CAACL,YAAD,CAAZ;AACD,KANa;AAOdM,IAAAA,UAAU,EAAE,CAACC,KAAD,EAAQC,OAAR,KAAoB;AAC9BhB,MAAAA,QAAQ,CAACe,KAAD,CAAR;AACD,KATa;AAUdE,IAAAA,kBAAkB,EAAE,CAAC,CAAD,EAAI,EAAJ;AAVN,GAAhB;AAaA,QAAMC,OAAO,GAAG,CACd;AACEC,IAAAA,IAAI,EAAE,IADR;AAEEC,IAAAA,KAAK,EAAE,IAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GADc,EAQd;AACEF,IAAAA,IAAI,EAAE,MADR;AAEEC,IAAAA,KAAK,EAAE,MAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GARc,EAed;AACEF,IAAAA,IAAI,EAAE,UADR;AAEEC,IAAAA,KAAK,EAAE,UAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GAfc,EAsBd;AACEF,IAAAA,IAAI,EAAE,kBADR;AAEEC,IAAAA,KAAK,EAAE,WAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GAtBc,EA6Bd;AACEF,IAAAA,IAAI,EAAE,SADR;AAEEC,IAAAA,KAAK,EAAE,SAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GA7Bc,EAoCd;AACEF,IAAAA,IAAI,EAAE,eADR;AAEEC,IAAAA,KAAK,EAAE,gBAFT;AAGEjB,IAAAA,OAAO,EAAE;AACPkB,MAAAA,MAAM,EAAE;AADD;AAHX,GApCc,CAAhB;;AA6CA,QAAMR,YAAY,GAAIS,eAAD,IAAqB;AACxC,QAAI3B,MAAM,GAAG2B,eAAe,CACzBZ,GADU,CACN,UAAUa,IAAV,EAAgB;AACnB,aAAOA,IAAI,CAACC,EAAZ;AACD,KAHU,EAIVC,IAJU,CAIL,IAJK,CAAb;AAMAjC,IAAAA,KAAK,CACFkC,MADH,CAEK,GAAEC,OAAO,CAACC,GAAR,CAAYC,sBAAuB,8BAA6BlC,MAAO,EAF9E,EAGI;AACEmC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYC,cAAc,CAACC,OAAf,CAAuB,YAAvB;AADpB;AADX,KAHJ,EASGC,IATH,CASQ,UAAUC,QAAV,EAAoB;AACxBC,MAAAA,SAAS;AACV,KAXH,EAYGC,KAZH,CAYS,UAAUC,KAAV,EAAiB;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAaF,KAAzB;AACAxC,MAAAA,QAAQ,CAACwC,KAAD,CAAR;AACD,KAfH,EAgBGG,OAhBH,CAgBW,YAAY,CACnB;AACD,KAlBH;AAmBD,GA1BD;;AA4BA,QAAML,SAAS,GAAG,YAAY;AAC5B5C,IAAAA,KAAK,CACFkD,GADH,CACQ,GAAEf,OAAO,CAACC,GAAR,CAAYC,sBAAuB,4BAD7C,EAC0E;AACtEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYC,cAAc,CAACC,OAAf,CAAuB,YAAvB;AADpB;AAD6D,KAD1E,EAMGC,IANH,CAMQ,UAAUC,QAAV,EAAoB;AACxBvC,MAAAA,SAAS,CAACuC,QAAQ,CAAC1B,IAAV,CAAT;AACD,KARH,EASG4B,KATH,CASS,UAAUC,KAAV,EAAiB;AACtB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BF,KAAtC;AACAvC,MAAAA,OAAO,CAACG,IAAR,CAAa,GAAb;AACD,KAbH,EAcGuC,OAdH,CAcW,YAAY,CACnB;AACD,KAhBH;AAiBD,GAlBD;;AAmBAvD,EAAAA,SAAS,CAAC,MAAM;AACdkD,IAAAA,SAAS;AACV,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACE,uDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAEA;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAK,IAAA,EAAE,EAAC,YAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CAFF,eAKE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGvC,YAAY,CAAC8C,OAAb,iBACC,oBAAC,KAAD;AAAO,IAAA,QAAQ,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEGC,IAAI,CAACC,SAAL,CAAehD,YAAY,CAAC8C,OAA5B,CAFH,CAFJ,eAOF;AAAQ,IAAA,SAAS,EAAC,mBAAlB;AAAsC,IAAA,OAAO,EAAE,MAAI5C,OAAO,CAACG,IAAR,CAAa,aAAb,CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPE,eAQE,oBAAC,YAAD;AACE,IAAA,KAAK,EAAE,EADT;AAEE,IAAA,IAAI,EAAEP,MAFR;AAGE,IAAA,OAAO,EAAEuB,OAHX;AAIE,IAAA,OAAO,EAAEf,OAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CAFF,eAiBE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,CALF,CAFA,CADF,CADF;AAgCD;;AACD,eAAeT,cAAf","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport NavbarComponent from \"../../components/NavbarComponent\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\n\r\nconst axios = require(\"axios\");\r\n\r\nfunction ClientListPage() {\r\n  const [result, setResult] = useState([]);\r\n  const [errorMessage, setError] = useState([]);\r\n  let history = useHistory();\r\n\r\n  const goToEdit = (value) => {\r\n    history.push(\"/edit_client?client=\" + value[0]);\r\n  };\r\n\r\n  const options = {\r\n    filterType: \"dropdown\",\r\n    rowHover: true,\r\n    onRowsDelete: (rowsDeleted) => {\r\n      const rowsToDelete = rowsDeleted.data.map((d) => result[d.dataIndex]);\r\n      handleDelete(rowsToDelete);\r\n    },\r\n    onRowClick: (event, rowData) => {\r\n      goToEdit(event);\r\n    },\r\n    rowsPerPageOptions: [5, 10],\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      name: \"id\",\r\n      label: \"ID\",\r\n      options: {\r\n        filter: true,\r\n      },\r\n    },\r\n    {\r\n      name: \"name\",\r\n      label: \"NAME\",\r\n      options: {\r\n        filter: true,\r\n      },\r\n    },\r\n    {\r\n      name: \"turnover\",\r\n      label: \"TURNOVER\",\r\n      options: {\r\n        filter: true,\r\n      },\r\n    },\r\n    {\r\n      name: \"number_employees\",\r\n      label: \"EMPLOYEES\",\r\n      options: {\r\n        filter: true,\r\n      },\r\n    },\r\n    {\r\n      name: \"website\",\r\n      label: \"WEBSITE\",\r\n      options: {\r\n        filter: true,\r\n      },\r\n    },\r\n    {\r\n      name: \"clientManager\",\r\n      label: \"CLIENT MANAGER\",\r\n      options: {\r\n        filter: true,\r\n      },\r\n    },\r\n  ];\r\n\r\n  const handleDelete = (recordsToDelete) => {\r\n    var result = recordsToDelete\r\n      .map(function (item) {\r\n        return item.id;\r\n      })\r\n      .join(\", \");\r\n\r\n    axios\r\n      .delete(\r\n        `${process.env.REACT_APP_API_ROOT_URL}/client-management/clients/${result}`,\r\n        {\r\n          headers: {\r\n            Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\"),\r\n          },\r\n        }\r\n      )\r\n      .then(function (response) {\r\n        fetchData();\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"Error : \" + error);\r\n        setError(error);\r\n      })\r\n      .finally(function () {\r\n        // always executed\r\n      });\r\n  };\r\n\r\n  const fetchData = async () => {\r\n    axios\r\n      .get(`${process.env.REACT_APP_API_ROOT_URL}/client-management/clients`, {\r\n        headers: {\r\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\"),\r\n        }\r\n      })\r\n      .then(function (response) {\r\n        setResult(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        // handle error\r\n        console.log(\"Error Fetching Data: \" + error);\r\n        history.push(\"/\");\r\n      })\r\n      .finally(function () {\r\n        // always executed\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <section>\r\n      <NavbarComponent />\r\n      <div className=\"container\">\r\n       \r\n        <div id=\"main_index\">\r\n          <h2>Clients List</h2>\r\n        </div>\r\n        <div className=\"columns\">\r\n        \r\n          <div className=\"column is-12\">\r\n            {errorMessage.message && (\r\n              <Alert severity=\"error\">\r\n                <AlertTitle>Error</AlertTitle>\r\n                {JSON.stringify(errorMessage.message)}\r\n              </Alert>\r\n            )}\r\n        <button className=\"button is-primary\" onClick={()=>history.push(\"/new-client\")}>New Client</button>\r\n            <MUIDataTable\r\n              title={\"\"}\r\n              data={result}\r\n              columns={columns}\r\n              options={options}\r\n            />\r\n          </div>\r\n          <div className=\"column\"></div>\r\n        </div>\r\n      </div>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\nexport default ClientListPage;\r\n"]},"metadata":{},"sourceType":"module"}