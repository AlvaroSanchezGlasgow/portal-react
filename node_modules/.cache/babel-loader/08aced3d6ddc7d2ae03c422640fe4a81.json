{"ast":null,"code":"var _jsxFileName = \"/Users/alvarosanchezgalvan/Desktop/WorkSpace/poc-portal/src/Components/AddContactForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nconst axios = require(\"axios\");\n\nlet flag = true;\n\nfunction AddContactForm(props) {\n  const [contactsObject, setContactsObject] = useState([]);\n  const [auxContactsObject, setAuxContactsObject] = useState([]);\n  const [sending, setSending] = useState(false);\n  let history = useHistory();\n\n  const handleChangeContactObject = e => {\n    setAuxContactsObject({ ...auxContactsObject,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const fetchData = () => {\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const clientUrl = params.get(\"client\");\n    axios.get(`http://localhost:8011/contact-management/contacts/${clientUrl}`, {\n      headers: {}\n    }).then(function (response) {\n      setContactsObject(response.data);\n    }).catch(function (error) {// handle error\n    }).finally(function () {// always executed\n    });\n  };\n\n  useEffect(props => {\n    fetchData();\n  }, []);\n\n  const handleSubmit = evt => {\n    setSending(true);\n    flag = true;\n    var params = new URLSearchParams();\n\n    if (!contactsObject.name) {\n      flag = false;\n    }\n\n    if (!contactsObject.surname) {\n      flag = false;\n    }\n\n    if (!contactsObject.role) {\n      flag = false;\n    }\n\n    if (!contactsObject.comment) {\n      flag = false;\n    }\n\n    if (!props.clientId) {\n      flag = false;\n    }\n\n    if (flag) {\n      params.append(\"client_id\", props.clientId);\n      params.append(\"surname\", contactsObject.surname);\n      params.append(\"name\", contactsObject.name);\n      params.append(\"role\", contactsObject.role);\n      params.append(\"comment\", contactsObject.comment);\n      axios.post(`http://localhost:8011/contact-management/contacts`, params, {\n        headers: {}\n      }).then(function (response) {\n        fetchData();\n      }).catch(function (error) {// handle error\n      }).finally(function () {// always executed\n      });\n    }\n  };\n\n  const handleDeleteContacts = id => {\n    axios.delete(`http://localhost:8011/contact-management/contacts/${id}`, {\n      headers: {}\n    }).then(function (response) {}).catch(function (error) {// handle error\n    }).finally(function () {// always executed\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"input\",\n    name: \"name\",\n    id: \"name\",\n    placeholder: \"name\",\n    type: \"text\",\n    onChange: e => handleChangeContactObject(e),\n    maxLength: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }), sending && !contactsObject.name && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 27\n    }\n  }, \"Mandatory Field\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"input\",\n    name: \"surname\",\n    id: \"surname\",\n    placeholder: \"surname\",\n    type: \"text\",\n    onChange: e => handleChangeContactObject(e),\n    maxLength: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }), sending && !contactsObject.surname && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 27\n    }\n  }, \"Mandatory Field\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"input\",\n    name: \"role\",\n    id: \"role\",\n    placeholder: \"role\",\n    type: \"text\",\n    onChange: e => handleChangeContactObject(e),\n    maxLength: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }), sending && !contactsObject.role && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 27\n    }\n  }, \"Mandatory Field\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"input\",\n    name: \"comment\",\n    id: \"comment\",\n    placeholder: \"comment\",\n    type: \"text\",\n    onChange: e => handleChangeContactObject(e),\n    maxLength: \"30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }), sending && !auxContactsObject.comment && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 27\n    }\n  }, \"Mandatory Field\")))), /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    class: \"button is-black\",\n    onClick: () => handleSubmit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }, \"Add Contact\")), /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table is-hoverable\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 23\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 23\n    }\n  }, \"Surname\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 23\n    }\n  }, \"Role\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 23\n    }\n  }, \"Comment\")), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, contactsObject.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      class: \"button is-text\",\n      onClick: () => handleDeleteContacts(item.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 29\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 29\n      }\n    }, item.surname), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 29\n      }\n    }, item.role), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 29\n      }\n    }, item.comment));\n  })))));\n}\n\nexport default AddContactForm;","map":{"version":3,"sources":["/Users/alvarosanchezgalvan/Desktop/WorkSpace/poc-portal/src/Components/AddContactForm.js"],"names":["React","useState","useEffect","useHistory","Alert","DeleteIcon","axios","require","flag","AddContactForm","props","contactsObject","setContactsObject","auxContactsObject","setAuxContactsObject","sending","setSending","history","handleChangeContactObject","e","target","name","value","fetchData","search","window","location","params","URLSearchParams","clientUrl","get","headers","then","response","data","catch","error","finally","handleSubmit","evt","surname","role","comment","clientId","append","post","handleDeleteContacts","id","delete","map","item"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\nconst axios = require(\"axios\");\nlet flag = true;\n\nfunction AddContactForm(props) {\n  const [contactsObject, setContactsObject] = useState([]);\n  const [auxContactsObject, setAuxContactsObject] = useState([]);\n  const [sending, setSending] = useState(false);\n  \n  let history = useHistory();\n\n  const handleChangeContactObject = (e) => {\n    setAuxContactsObject({ ...auxContactsObject, [e.target.name]: e.target.value });\n  };\n\n  const fetchData = () => {\n\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const clientUrl = params.get(\"client\");\n\n    axios\n    .get(`http://localhost:8011/contact-management/contacts/${clientUrl}`, {\n      headers: {},\n    })\n    .then(function (response) {\n      setContactsObject(response.data);\n    })\n    .catch(function (error) {\n      // handle error\n    })\n    .finally(function () {\n      // always executed\n    });\n  }\n\n  useEffect((props) => {\n   fetchData();\n\n  }, []);\n\n  \n\n  const handleSubmit = (evt) => {\n    \n    setSending(true);\n    \n    flag = true;\n    var params = new URLSearchParams();\n    \n    if (!contactsObject.name) {\n      flag = false;\n    }\n    if (!contactsObject.surname) {\n      flag = false;\n    }\n    if (!contactsObject.role) {\n      flag = false;\n    }\n    if (!contactsObject.comment) {\n      flag = false;\n    }\n    if (!props.clientId) {\n      flag = false;\n    }\n\n    if (flag) {\n        params.append(\"client_id\", props.clientId);\n       \n        params.append(\"surname\", contactsObject.surname);\n        params.append(\"name\", contactsObject.name);\n        params.append(\"role\", contactsObject.role);\n        params.append(\"comment\", contactsObject.comment);\n\n   \n      axios\n        .post(`http://localhost:8011/contact-management/contacts`, params, {\n          headers: {},\n        })\n        .then(function (response) {\n          fetchData();\n        })\n        .catch(function (error) {\n          // handle error\n        })\n        .finally(function () {\n          // always executed\n        });\n    }\n  };\n  const handleDeleteContacts = (id) => {\n    \n    axios\n       .delete(`http://localhost:8011/contact-management/contacts/${id}`, {\n         headers: {},\n       })\n       .then(function (response) {\n        \n       })\n       .catch(function (error) {\n         // handle error\n       })\n       .finally(function () {\n         // always executed\n       });\n   \n };\n\n  return (\n    <>\n    \n    \n      <div className=\"columns\">\n        <div className=\"column\">\n           \n          <input\n            class=\"input\"\n            name=\"name\"\n            id=\"name\"\n            placeholder=\"name\"\n            type=\"text\"\n            onChange={(e) => handleChangeContactObject(e)}\n            maxLength=\"20\"\n          />\n       \n        {sending && !contactsObject.name && (\n                        <>\n                          <Alert variant=\"outlined\" severity=\"error\">\n                            Mandatory Field\n                          </Alert>\n                        </>\n                      )}\n                       </div>\n        <div className=\"column\">\n          <input\n            class=\"input\"\n            name=\"surname\"\n            id=\"surname\"\n            placeholder=\"surname\"\n            type=\"text\"\n            onChange={(e) => handleChangeContactObject(e)}\n            maxLength=\"20\"\n          />\n        \n        {sending && !contactsObject.surname  && (\n                        <>\n                          <Alert variant=\"outlined\" severity=\"error\">\n                            Mandatory Field\n                          </Alert>\n                        </>\n                      )}\n      </div>\n      </div>\n      <div className=\"columns\">\n        <div className=\"column\">\n          <input\n            class=\"input\"\n            name=\"role\"\n            id=\"role\"\n            placeholder=\"role\"\n            type=\"text\"\n            onChange={(e) => handleChangeContactObject(e)}\n            maxLength=\"20\"\n          />\n        \n        {sending && !contactsObject.role  && (\n                        <>\n                          <Alert variant=\"outlined\" severity=\"error\">\n                            Mandatory Field\n                          </Alert>\n                        </>\n                      )}\n                      </div>\n        <div className=\"column\">\n          <input\n            class=\"input\"\n            name=\"comment\"\n            id=\"comment\"\n            placeholder=\"comment\"\n            type=\"text\"\n            onChange={(e) => handleChangeContactObject(e)}\n            maxLength=\"30\"\n          />\n        \n        {sending && !auxContactsObject.comment  && (\n                        <>\n                          <Alert variant=\"outlined\" severity=\"error\">\n                            Mandatory Field\n                          </Alert>\n                        </>\n                      )}\n      </div>\n      </div>\n      <center>\n     \n      <button class=\"button is-black\" onClick={() => handleSubmit()}>\n         Add Contact\n        </button>\n        </center>\n        <center>\n                  <table className=\"table is-hoverable\">\n                    <thead>\n                      <td></td>\n                      <td>Name</td>\n                      <td>Surname</td>\n                      <td>Role</td>\n                      <td>Comment</td>\n                    </thead>\n                    <tbody>\n                      {contactsObject.map(function (item) {\n                        return (\n                          <tr>\n                            <td>\n                              <button\n                                class=\"button is-text\"\n                                onClick={() => handleDeleteContacts(item.id)}\n                              >\n                                <DeleteIcon />\n                              </button>\n                            </td>\n\n                            <td>{item.name}</td>\n                            <td>{item.surname}</td>\n                            <td>{item.role}</td>\n                            <td>{item.comment}</td>\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </center>\n             \n    </>\n  );\n}\n\nexport default AddContactForm;\n"]},"metadata":{},"sourceType":"module"}