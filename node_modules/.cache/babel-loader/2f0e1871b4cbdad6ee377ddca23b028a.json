{"ast":null,"code":"var _jsxFileName = \"/Users/alvarosanchezgalvan/Desktop/WorkSpace/poc-portal/src/TrackerAdmin/AddContactForm.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\nimport RemoveCircleOutlineIcon from \"@material-ui/icons/RemoveCircleOutline\";\n\nconst axios = require(\"axios\");\n\nlet flag = true;\n\nfunction AddContactForm(props) {\n  const [contactsObject, setContactsObject] = useState([]);\n  const [auxContactsObject, setAuxContactsObject] = useState([]);\n  const [sending, setSending] = useState(false);\n  const [showContactForm, setShowContactForm] = useState(false);\n\n  const handleChangeContactObject = e => {\n    setAuxContactsObject({ ...auxContactsObject,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const fetchData = () => {\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const clientUrl = params.get(\"client\");\n    axios.get(`${process.env.REACT_APP_API_ROOT_URL}/contact-management/contacts/${clientUrl}`, {\n      headers: {}\n    }).then(function (response) {\n      setContactsObject(response.data);\n    }).catch(function (error) {// handle error\n    }).finally(function () {// always executed\n    });\n  };\n\n  useEffect(props => {\n    fetchData();\n  }, []);\n\n  const handleKeyPress = event => {\n    if (event.key === 'Enter') {\n      handleSubmit();\n    }\n  };\n\n  const handleSubmit = evt => {\n    setSending(true);\n    flag = true;\n    var params = new URLSearchParams();\n\n    if (!auxContactsObject.name) {\n      flag = false;\n    }\n\n    if (!auxContactsObject.surname) {\n      flag = false;\n    }\n\n    if (!auxContactsObject.role) {\n      flag = false;\n    }\n\n    if (!auxContactsObject.comment) {\n      flag = false;\n    }\n\n    if (!props.clientId) {\n      flag = false;\n    }\n\n    if (flag) {\n      params.append(\"client_id\", props.clientId);\n      params.append(\"surname\", auxContactsObject.surname);\n      params.append(\"name\", auxContactsObject.name);\n      params.append(\"role\", auxContactsObject.role);\n      params.append(\"comment\", auxContactsObject.comment);\n      axios.post(`${process.env.REACT_APP_API_ROOT_URL}/contact-management/contacts`, params, {\n        headers: {}\n      }).then(function (response) {\n        fetchData();\n      }).catch(function (error) {// handle error\n      }).finally(function () {// always executed\n      });\n    }\n  };\n\n  const handleDeleteContacts = id => {\n    axios.delete(`${process.env.REACT_APP_API_ROOT_URL}/contact-management/contacts/${id}`, {\n      headers: {}\n    }).then(function (response) {\n      fetchData();\n    }).catch(function (error) {// handle error\n    }).finally(function () {// always executed\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, \"Contacts\", /*#__PURE__*/React.createElement(\"button\", {\n    class: \"button is-white\",\n    onClick: () => showContactForm ? setShowContactForm(false) : setShowContactForm(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, showContactForm ? /*#__PURE__*/React.createElement(RemoveCircleOutlineIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(AddCircleOutlineIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }))), showContactForm ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"input\",\n    name: \"name\",\n    id: \"name\",\n    placeholder: \"name\",\n    type: \"text\",\n    onChange: e => handleChangeContactObject(e),\n    onKeyPress: e => handleKeyPress(e),\n    maxLength: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }), sending && !auxContactsObject.name && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }, \"Mandatory Field\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"input\",\n    name: \"surname\",\n    id: \"surname\",\n    placeholder: \"surname\",\n    type: \"text\",\n    onChange: e => handleChangeContactObject(e),\n    onKeyPress: e => handleKeyPress(e),\n    maxLength: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }), sending && !auxContactsObject.surname && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }\n  }, \"Mandatory Field\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"input\",\n    name: \"role\",\n    id: \"role\",\n    placeholder: \"role\",\n    type: \"text\",\n    onChange: e => handleChangeContactObject(e),\n    onKeyPress: e => handleKeyPress(e),\n    maxLength: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }), sending && !auxContactsObject.role && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 19\n    }\n  }, \"Mandatory Field\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"input\",\n    name: \"comment\",\n    id: \"comment\",\n    placeholder: \"comment\",\n    type: \"text\",\n    onChange: e => handleChangeContactObject(e),\n    onKeyPress: e => handleKeyPress(e),\n    maxLength: \"30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }), sending && !auxContactsObject.comment && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n    variant: \"outlined\",\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }, \"Mandatory Field\")))), /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    class: \"button is-black\",\n    onClick: () => handleSubmit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, \"Add Contact\"))) : /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table is-hoverable\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, \"Surname\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, \"Role\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, \"Comment\")), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 11\n    }\n  }, contactsObject.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      class: \"button is-text\",\n      onClick: () => handleDeleteContacts(item.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 19\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 19\n      }\n    }, item.surname), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 19\n      }\n    }, item.role), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 19\n      }\n    }, item.comment));\n  })))));\n}\n\nexport default AddContactForm;","map":{"version":3,"sources":["/Users/alvarosanchezgalvan/Desktop/WorkSpace/poc-portal/src/TrackerAdmin/AddContactForm.js"],"names":["React","useState","useEffect","Alert","DeleteIcon","AddCircleOutlineIcon","RemoveCircleOutlineIcon","axios","require","flag","AddContactForm","props","contactsObject","setContactsObject","auxContactsObject","setAuxContactsObject","sending","setSending","showContactForm","setShowContactForm","handleChangeContactObject","e","target","name","value","fetchData","search","window","location","params","URLSearchParams","clientUrl","get","process","env","REACT_APP_API_ROOT_URL","headers","then","response","data","catch","error","finally","handleKeyPress","event","key","handleSubmit","evt","surname","role","comment","clientId","append","post","handleDeleteContacts","id","delete","map","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\nimport RemoveCircleOutlineIcon from \"@material-ui/icons/RemoveCircleOutline\";\n\nconst axios = require(\"axios\");\nlet flag = true;\n\nfunction AddContactForm(props) {\n  const [contactsObject, setContactsObject] = useState([]);\n  const [auxContactsObject, setAuxContactsObject] = useState([]);\n  const [sending, setSending] = useState(false);\n  const [showContactForm, setShowContactForm] = useState(false);\n\n  const handleChangeContactObject = (e) => {\n    setAuxContactsObject({\n      ...auxContactsObject,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const fetchData = () => {\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const clientUrl = params.get(\"client\");\n\n    axios\n      .get(`${process.env.REACT_APP_API_ROOT_URL}/contact-management/contacts/${clientUrl}`, {\n        headers: {},\n      })\n      .then(function (response) {\n        setContactsObject(response.data);\n      })\n      .catch(function (error) {\n        // handle error\n      })\n      .finally(function () {\n        // always executed\n      });\n  };\n\n  useEffect((props) => {\n    fetchData();\n  }, []);\n\n  const handleKeyPress = (event) => {\n    if(event.key === 'Enter'){\n      handleSubmit();\n    }\n  }\n  \n  const handleSubmit = (evt) => {\n    setSending(true);\n\n    flag = true;\n    var params = new URLSearchParams();\n\n    if (!auxContactsObject.name) {\n      flag = false;\n    }\n    if (!auxContactsObject.surname) {\n      flag = false;\n    }\n    if (!auxContactsObject.role) {\n      flag = false;\n    }\n    if (!auxContactsObject.comment) {\n      flag = false;\n    }\n    if (!props.clientId) {\n      flag = false;\n    }\n\n    if (flag) {\n      params.append(\"client_id\", props.clientId);\n\n      params.append(\"surname\", auxContactsObject.surname);\n      params.append(\"name\", auxContactsObject.name);\n      params.append(\"role\", auxContactsObject.role);\n      params.append(\"comment\", auxContactsObject.comment);\n\n      axios\n        .post(`${process.env.REACT_APP_API_ROOT_URL}/contact-management/contacts`, params, {\n          headers: {},\n        })\n        .then(function (response) {\n          fetchData();\n        })\n        .catch(function (error) {\n          // handle error\n        })\n        .finally(function () {\n          // always executed\n        });\n    }\n  };\n  const handleDeleteContacts = (id) => {\n    axios\n      .delete(`${process.env.REACT_APP_API_ROOT_URL}/contact-management/contacts/${id}`, {\n        headers: {},\n      })\n      .then(function (response) {\n        fetchData();\n      })\n      .catch(function (error) {\n        // handle error\n      })\n      .finally(function () {\n        // always executed\n      });\n  };\n\n  return (\n    <>\n      <div class=\"label\">\n        Contacts\n        <button\n          class=\"button is-white\"\n          onClick={() =>\n            showContactForm\n              ? setShowContactForm(false)\n              : setShowContactForm(true)\n          }\n        >\n          {showContactForm ? (\n            <RemoveCircleOutlineIcon />\n          ) : (\n            <AddCircleOutlineIcon />\n          )}\n        </button>\n      </div>\n      {showContactForm ? (\n        <>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <input\n                class=\"input\"\n                name=\"name\"\n                id=\"name\"\n                placeholder=\"name\"\n                type=\"text\"\n                onChange={(e) => handleChangeContactObject(e)}\n                onKeyPress={e => handleKeyPress(e)}\n                maxLength=\"20\"\n              />\n\n              {sending && !auxContactsObject.name && (\n                <>\n                  <Alert variant=\"outlined\" severity=\"error\">\n                    Mandatory Field\n                  </Alert>\n                </>\n              )}\n            </div>\n            <div className=\"column\">\n              <input\n                class=\"input\"\n                name=\"surname\"\n                id=\"surname\"\n                placeholder=\"surname\"\n                type=\"text\"\n                onChange={(e) => handleChangeContactObject(e)}\n                onKeyPress={e => handleKeyPress(e)}\n                maxLength=\"20\"\n              />\n\n              {sending && !auxContactsObject.surname && (\n                <>\n                  <Alert variant=\"outlined\" severity=\"error\">\n                    Mandatory Field\n                  </Alert>\n                </>\n              )}\n            </div>\n          </div>\n          <div className=\"columns\">\n            <div className=\"column\">\n              <input\n                class=\"input\"\n                name=\"role\"\n                id=\"role\"\n                placeholder=\"role\"\n                type=\"text\"\n                onChange={(e) => handleChangeContactObject(e)}\n                onKeyPress={e => handleKeyPress(e)}\n                maxLength=\"20\"\n              />\n\n              {sending && !auxContactsObject.role && (\n                <>\n                  <Alert variant=\"outlined\" severity=\"error\">\n                    Mandatory Field\n                  </Alert>\n                </>\n              )}\n            </div>\n            <div className=\"column\">\n              <input\n                class=\"input\"\n                name=\"comment\"\n                id=\"comment\"\n                placeholder=\"comment\"\n                type=\"text\"\n                onChange={(e) => handleChangeContactObject(e)}\n                onKeyPress={e => handleKeyPress(e)}\n                maxLength=\"30\"\n              />\n\n              {sending && !auxContactsObject.comment && (\n                <>\n                  <Alert variant=\"outlined\" severity=\"error\">\n                    Mandatory Field\n                  </Alert>\n                </>\n              )}\n            </div>\n          </div>\n          <center>\n            <button class=\"button is-black\" onClick={() => handleSubmit()}>\n              Add Contact\n            </button>\n          </center>\n        </>\n      ) : (\n        <></>\n      )}\n      <center>\n        <table className=\"table is-hoverable\">\n          <thead>\n            <td></td>\n            <td>Name</td>\n            <td>Surname</td>\n            <td>Role</td>\n            <td>Comment</td>\n          </thead>\n          <tbody>\n            {contactsObject.map(function (item) {\n              return (\n                <tr>\n                  <td>\n                    <button\n                      class=\"button is-text\"\n                      onClick={() => handleDeleteContacts(item.id)}\n                    >\n                      <DeleteIcon />\n                    </button>\n                  </td>\n\n                  <td>{item.name}</td>\n                  <td>{item.surname}</td>\n                  <td>{item.role}</td>\n                  <td>{item.comment}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </center>\n    </>\n  );\n}\n\nexport default AddContactForm;\n"]},"metadata":{},"sourceType":"module"}