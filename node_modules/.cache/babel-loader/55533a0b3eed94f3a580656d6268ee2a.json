{"ast":null,"code":"var _jsxFileName = \"C:\\\\personal_workspace\\\\portal-react\\\\src\\\\TrackerAdmin\\\\TrackerComponent.js\";\nimport React, { useState, useEffect } from 'react';\nimport MUIDataTable from \"mui-datatables\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactHtmlParser from 'react-html-parser';\n\nconst axios = require('axios');\n\nfunction TrackerComponent() {\n  const [result, setResult] = useState([]);\n  let history = useHistory();\n  const options = {\n    filterType: 'dropdown',\n    onRowsDelete: rowsDeleted => {\n      const rowsToDelete = rowsDeleted.data.map(d => result[d.dataIndex]);\n      handleDelete(rowsToDelete);\n    },\n    download: false,\n    filter: false,\n    search: false,\n    print: false,\n    rowsPerPageOptions: [5, 10]\n  };\n  const columns = [{\n    name: \"id\",\n    label: \"ID\",\n    options: {\n      filter: false,\n      searchable: false,\n      display: false,\n      view: false\n    }\n  }, {\n    name: \"area_description\",\n    label: \"AREA\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"dateAction\",\n    label: \"DATE\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"name\",\n    label: \"NAME\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"role\",\n    label: \"ROLE\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"comment\",\n    label: \"COMMENT\",\n    options: {\n      filter: true,\n      customBodyRender: value => {\n        return ReactHtmlParser(value);\n      }\n    }\n  }];\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    //alert(JSON.stringify(value));\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const clientUrl = params.get('client'); //We call the api\n\n    axios.get(`${process.env.REACT_APP_API_ROOT_URL}/client-tracker/tracks/${clientUrl}`, {\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\")\n      }\n    }).then(function (response) {\n      setResult(response.data);\n    }).catch(function (error) {// handle error\n    }).finally(function () {// always executed\n    });\n  };\n\n  const handleDelete = recordsToDelete => {\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const clientUrl = params.get('client');\n    var result = recordsToDelete.map(function (item) {\n      return item.id;\n    }).join(', ');\n    axios.delete(`${process.env.REACT_APP_API_ROOT_URL}/client-tracker/tracks/${result}`, {\n      headers: {}\n    }).then(function (response) {\n      history.push(\"/\");\n      history.push(\"/client_tracker?client=\" + clientUrl);\n    }).catch(function (error) {\n      console.log(\"Error Fetching Data: \" + error);\n    }).finally(function () {// always executed\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns is-centered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(MUIDataTable, {\n    title: \"Actities Tracker\",\n    data: result,\n    columns: columns,\n    options: options,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 12\n    }\n  })));\n}\n\nexport default TrackerComponent;","map":{"version":3,"sources":["C:/personal_workspace/portal-react/src/TrackerAdmin/TrackerComponent.js"],"names":["React","useState","useEffect","MUIDataTable","useHistory","ReactHtmlParser","axios","require","TrackerComponent","result","setResult","history","options","filterType","onRowsDelete","rowsDeleted","rowsToDelete","data","map","d","dataIndex","handleDelete","download","filter","search","print","rowsPerPageOptions","columns","name","label","searchable","display","view","customBodyRender","value","fetchData","window","location","params","URLSearchParams","clientUrl","get","process","env","REACT_APP_API_ROOT_URL","headers","Authorization","sessionStorage","getItem","then","response","catch","error","finally","recordsToDelete","item","id","join","delete","push","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport ReactHtmlParser from 'react-html-parser';\r\n\r\n\r\nconst axios = require('axios');\r\n\r\nfunction TrackerComponent() {\r\n    const [result, setResult] = useState([]);\r\n    let history = useHistory();\r\n\r\n   \r\n\r\n    const options = {\r\n        filterType: 'dropdown',\r\n        onRowsDelete: (rowsDeleted) => {\r\n            const rowsToDelete = rowsDeleted.data.map((d) => result[d.dataIndex]);\r\n            handleDelete(rowsToDelete);\r\n        },\r\n        download:false,\r\n        filter:false,\r\n        search:false,\r\n        print:false,\r\n        rowsPerPageOptions: [5,10]\r\n    };\r\n\r\n    const columns = [\r\n\r\n        {\r\n            name: \"id\",\r\n            label: \"ID\",\r\n            options: {\r\n                filter: false,\r\n                searchable:false,\r\n                display:false,\r\n                view:false\r\n               \r\n            }\r\n        },\r\n        {\r\n            name: \"area_description\",\r\n            label: \"AREA\",\r\n            options: {\r\n                filter: true\r\n            }\r\n        },\r\n        {\r\n            name: \"dateAction\",\r\n            label: \"DATE\",\r\n            options: {\r\n                filter: true\r\n      \r\n            }\r\n        },\r\n        {\r\n            name: \"name\",\r\n            label: \"NAME\",\r\n            options: {\r\n                filter: true,\r\n           \r\n            }\r\n        },{\r\n            name: \"role\",\r\n            label: \"ROLE\",\r\n            options: {\r\n                filter: true,\r\n           \r\n            }\r\n        },{\r\n            name: \"comment\",\r\n            label: \"COMMENT\",\r\n            options: {\r\n                filter: true,\r\n                customBodyRender: (value) => {\r\n                    return (\r\n                   ReactHtmlParser(value)\r\n                    );\r\n                },\r\n                \r\n            }\r\n        }\r\n  \r\n];\r\n\r\nuseEffect(() => { fetchData() }, []);\r\n\r\n        const fetchData = async () => {\r\n        //alert(JSON.stringify(value));\r\n        \r\n        const search = window.location.search;\r\n        const params = new URLSearchParams(search);\r\n        const clientUrl = params.get('client');\r\n       \r\n        //We call the api\r\n        axios.get(`${process.env.REACT_APP_API_ROOT_URL}/client-tracker/tracks/${clientUrl}`, {\r\n            headers: {\r\n                Authorization: \"Bearer \" + sessionStorage.getItem(\"user_token\"),\r\n              }\r\n        }\r\n        )\r\n            .then(function (response) {\r\n                setResult(response.data);\r\n                \r\n\r\n            })\r\n            .catch(function (error) {\r\n                // handle error\r\n            })\r\n            .finally(function () {\r\n                // always executed\r\n               \r\n            });\r\n\r\n    }\r\n\r\n    const handleDelete = (recordsToDelete) => {\r\n        const search = window.location.search;\r\n        const params = new URLSearchParams(search);\r\n        const clientUrl = params.get('client');\r\n       \r\n\r\n        var result = recordsToDelete.map(function (item) {\r\n            return item.id;\r\n        }).join(', ');\r\n\r\n        axios.delete(`${process.env.REACT_APP_API_ROOT_URL}/client-tracker/tracks/${result}`, {\r\n            headers: {}\r\n        }).then(function (response) {\r\n            history.push(\"/\");\r\n                history.push(\"/client_tracker?client=\"+clientUrl);\r\n           \r\n\r\n        }).catch(function (error) {\r\n                \r\n                console.log(\"Error Fetching Data: \"+error);\r\n               \r\n\r\n            })\r\n            .finally(function () {\r\n                // always executed\r\n            });\r\n\r\n    }\r\n   \r\n    return (\r\n        <>\r\n           <div className=\"columns is-centered\">\r\n        \r\n           <MUIDataTable\r\n               title={\"Actities Tracker\"}\r\n               data={result}\r\n               columns={columns}\r\n               options={options}\r\n           />\r\n         \r\n</div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default TrackerComponent;"]},"metadata":{},"sourceType":"module"}