{"ast":null,"code":"var _jsxFileName = \"/Users/alvarosanchezgalvan/Desktop/WorkSpace/poc-portal/src/TrackerAdmin/TrackerComponent.js\";\nimport React, { useState, useEffect } from 'react';\nimport MUIDataTable from \"mui-datatables\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactHtmlParser from 'react-html-parser';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst axios = require('axios');\n\nfunction TrackerComponent() {\n  const [result, setResult] = useState([]);\n  const [searching, setSearching] = useState(false);\n  let history = useHistory();\n\n  const goToEdit = value => {\n    history.push(\"/client_tracker?client=\" + value[0]);\n  };\n\n  const options = {\n    filterType: 'dropdown',\n    onRowsDelete: rowsDeleted => {\n      const rowsToDelete = rowsDeleted.data.map(d => result[d.dataIndex]);\n      handleDelete(rowsToDelete);\n    },\n    download: false,\n    filter: false,\n    search: false,\n    print: false,\n    rowsPerPageOptions: [5, 10]\n  };\n  const columns = [{\n    name: \"area_description\",\n    label: \"AREA\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"dateAction\",\n    label: \"DATE\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"name\",\n    label: \"NAME\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"role\",\n    label: \"ROLE\",\n    options: {\n      filter: true\n    }\n  }, {\n    name: \"comment\",\n    label: \"COMMENT\",\n    options: {\n      filter: true,\n      customBodyRender: value => {\n        return ReactHtmlParser(value);\n      }\n    }\n  }];\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    //alert(JSON.stringify(value));\n    setSearching(true);\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const clientUrl = params.get('client'); //We call the api\n\n    axios.get(`http://localhost:8011/client-tracker/tracks/${clientUrl}`, {\n      headers: {}\n    }).then(function (response) {\n      setResult(response.data);\n    }).catch(function (error) {// handle error\n    }).finally(function () {\n      // always executed\n      setSearching(false);\n    });\n  };\n\n  const handleDelete = recordsToDelete => {\n    var result = recordsToDelete.map(function (item) {\n      return item.id;\n    }).join(', ');\n    axios.delete(`http://localhost:8011/client-tracker/tracks/${result}`, {\n      headers: {\n        'Authorization': 'Bearer ' + sessionStorage.getItem('user_token')\n      }\n    }).then(function (response) {\n      fetchData();\n    }).catch(function (error) {\n      console.log(\"Error Fetching Data: \" + error);\n    }).finally(function () {// always executed\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns is-centered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 12\n    }\n  }, searching && /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"primary\",\n    style: {\n      fontSize: 240\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 28\n    }\n  }), !searching && /*#__PURE__*/React.createElement(MUIDataTable, {\n    title: \"Actities Tracker\",\n    data: result,\n    columns: columns,\n    options: options,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 12\n    }\n  })));\n}\n\nexport default TrackerComponent;","map":{"version":3,"sources":["/Users/alvarosanchezgalvan/Desktop/WorkSpace/poc-portal/src/TrackerAdmin/TrackerComponent.js"],"names":["React","useState","useEffect","MUIDataTable","useHistory","ReactHtmlParser","CircularProgress","axios","require","TrackerComponent","result","setResult","searching","setSearching","history","goToEdit","value","push","options","filterType","onRowsDelete","rowsDeleted","rowsToDelete","data","map","d","dataIndex","handleDelete","download","filter","search","print","rowsPerPageOptions","columns","name","label","customBodyRender","fetchData","window","location","params","URLSearchParams","clientUrl","get","headers","then","response","catch","error","finally","recordsToDelete","item","id","join","delete","sessionStorage","getItem","console","log","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport MUIDataTable from \"mui-datatables\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactHtmlParser from 'react-html-parser';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst axios = require('axios');\n\nfunction TrackerComponent() {\n    const [result, setResult] = useState([]);\n    const [searching, setSearching] = useState(false);\n    let history = useHistory();\n\n    const goToEdit = (value) => {\n        history.push(\"/client_tracker?client=\" + value[0]);\n    }\n\n    const options = {\n        filterType: 'dropdown',\n        onRowsDelete: (rowsDeleted) => {\n            const rowsToDelete = rowsDeleted.data.map((d) => result[d.dataIndex]);\n            handleDelete(rowsToDelete);\n        },\n        download:false,\n        filter:false,\n        search:false,\n        print:false,\n        rowsPerPageOptions: [5,10]\n    };\n\n    const columns = [\n\n \n        {\n            name: \"area_description\",\n            label: \"AREA\",\n            options: {\n                filter: true\n            }\n        },\n        {\n            name: \"dateAction\",\n            label: \"DATE\",\n            options: {\n                filter: true\n      \n            }\n        },\n        {\n            name: \"name\",\n            label: \"NAME\",\n            options: {\n                filter: true,\n           \n            }\n        },{\n            name: \"role\",\n            label: \"ROLE\",\n            options: {\n                filter: true,\n           \n            }\n        },{\n            name: \"comment\",\n            label: \"COMMENT\",\n            options: {\n                filter: true,\n                customBodyRender: (value) => {\n                    return (\n                   ReactHtmlParser(value)\n                    );\n                },\n                \n            }\n        }\n  \n];\n\nuseEffect(() => { fetchData() }, []);\n\n        const fetchData = async () => {\n        //alert(JSON.stringify(value));\n        setSearching(true);\n        const search = window.location.search;\n        const params = new URLSearchParams(search);\n        const clientUrl = params.get('client');\n       \n        //We call the api\n        axios.get(`http://localhost:8011/client-tracker/tracks/${clientUrl}`, {\n            headers: {\n              \n            }\n        }\n        )\n            .then(function (response) {\n                setResult(response.data);\n                \n\n            })\n            .catch(function (error) {\n                // handle error\n            })\n            .finally(function () {\n                // always executed\n                setSearching(false);\n            });\n\n    }\n\n    const handleDelete = (recordsToDelete) => {\n\n\n        var result = recordsToDelete.map(function (item) {\n            return item.id;\n        }).join(', ');\n\n        axios.delete(`http://localhost:8011/client-tracker/tracks/${result}`, {\n            headers: {\n                'Authorization': 'Bearer ' + sessionStorage.getItem('user_token')\n            }\n        }).then(function (response) {\n            fetchData();\n\n        }).catch(function (error) {\n                \n                console.log(\"Error Fetching Data: \"+error);\n               \n\n            })\n            .finally(function () {\n                // always executed\n            });\n\n    }\n   \n    return (\n        <>\n           <div className=\"columns is-centered\">\n           {searching && ( <CircularProgress color=\"primary\"  style={{ fontSize: 240 }}/>) }\n           {!searching && (\n           <MUIDataTable\n               title={\"Actities Tracker\"}\n               data={result}\n               columns={columns}\n               options={options}\n           />\n           ) }\n</div>\n        </>\n    );\n}\n\nexport default TrackerComponent;"]},"metadata":{},"sourceType":"module"}